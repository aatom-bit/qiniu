<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <title>Linux AI åŠ©æ‰‹</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Color+Emoji&display=swap');
        
        body,
        html {
            margin: 0;
            padding: 0;
            height: 100%;
            font-family: 'Noto Color Emoji', 'Apple Color Emoji', 'Segoe UI Emoji', sans-serif;
            background: #1e1e1e;
            color: #ccc;
        }

        .app-container {
            display: flex;
            height: 100vh;
            width: 100vw;
            overflow: hidden;
        }

        /* ä¾§è¾¹æ  */
        .sidebar {
            flex: 0 0 auto;
            width: 240px;
            min-width: 220px;
            width: 220px;
            background: #252526;
            border-right: 1px solid #333;
            display: flex;
            flex-direction: column;
        }

        .new-chat-btn {
            padding: 15px;
            margin: 10px;
            background: #333;
            text-align: center;
            border-radius: 4px;
            cursor: pointer;
            transition: 0.3s;
        }

        .new-chat-btn:hover {
            background: #444;
        }

        .history-list {
            flex: 1;
            overflow-y: auto;
        }

        .history-item {
            padding: 12px 15px;
            font-size: 13px;
            border-bottom: 1px solid #2d2d2d;
            cursor: pointer;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .history-item.active {
            background: #37373d;
            border-left: 3px solid #007acc;
        }

        /* å¯¹è¯åŒº */
        .main-chat {
            flex: 1;
            display: flex;
            flex-direction: column;
            min-width: 300px;
        }

        #messages-container {
            flex: 1;
            overflow-y: auto;
            padding: 20px 20px;
            /* padding: 20px; */
        }

        .message {
            display: flex;
            margin-bottom: 20px;
            animation: fadeIn 0.3s ease;
            /* max-width: 90%; */
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(5px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .message.user {
            flex-direction: row-reverse;
        }

        .avatar {
            font-size: 20px;
            margin: 0 12px;
        }

        .content {
            max-width: 80%;
            min-width: 50px;
        }

        .text-bubble {
            background: #333;
            padding: 10px 14px;
            border-radius: 8px;
            line-height: 1.5;
            word-wrap: break-word;
        }

        .user .text-bubble {
            background: #007acc;
            color: white;
        }

        /* ä»£ç å—æ ·å¼ */
        .code-block {
            width: 100%;
            background: #000;
            border-radius: 6px;
            margin-top: 8px;
            border: 1px solid #444;
        }

        .code-header {
            background: #333;
            padding: 5px 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 11px;
        }

        .code-header button {
            background: #28a745;
            border: none;
            color: white;
            padding: 3px 8px;
            border-radius: 3px;
            cursor: pointer;
        }

        pre {
            padding: 12px;
            margin: 0;
            font-family: 'Fira Code', 'Courier New', monospace;
            overflow-x: auto;
            font-size: 13px;
            color: #d7ba7d;
        }

        .code-block pre {
            padding: 12px;
            margin: 0;
            font-family: 'Fira Code', 'Consolas', monospace;
            font-size: 13px;
            line-height: 1.5;
            overflow-x: auto;
            /* å…³é”®ï¼šä»£ç è¿‡é•¿æ—¶å†…éƒ¨æ¨ªå‘æ»šåŠ¨ */
            white-space: pre;
            /* ä¿æŒä»£ç åŸæ ·ï¼Œä¸æ¢è¡Œä»¥æ–¹ä¾¿é˜…è¯» */
            color: #d7ba7d;
        }

        pre::-webkit-scrollbar {
            height: 8px;
        }

        pre::-webkit-scrollbar-thumb {
            background: #444;
            border-radius: 4px;
        }

        pre::-webkit-scrollbar-thumb:hover {
            background: #555;
        }

        /* è¾“å…¥åŒº */
        .input-area {
            padding: 20px;
            border-top: 1px solid #333;
            justify-content: center;
            /* è¾“å…¥æ¡†å±…ä¸­ */
            display: flex;
            gap: 10px;
        }

        .input-wrapper {
            width: 100%;
            max-width: 80%;
            /* ä¸æ¶ˆæ¯æœ€å¤§å®½åº¦å¯¹é½ */
            display: flex;
            gap: 12px;
        }

        #user-input {
            flex: 1;
            height: 50px;
            background: #2d2d2d;
            border: 1px solid #444;
            color: white;
            padding: 10px;
            border-radius: 4px;
            resize: none;
            outline: none;
            resize: vertical;
            /* å…è®¸ç”¨æˆ·å‚ç›´æ‹‰ä¼¸è¾“å…¥æ¡† */
        }

        #send-btn {
            width: 80px;
            background: #007acc;
            border: none;
            color: white;
            border-radius: 4px;
            cursor: pointer;
        }

        #send-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .action-btn {
            padding: 12px;
            margin: 5px 10px;
            background: #2d2d2d;
            color: #aaa;
            text-align: center;
            border: 1px solid #444;
            border-radius: 4px;
            cursor: pointer;
            font-size: 13px;
            transition: 0.2s;
        }

        .action-btn:hover {
            background: #3d3d3d;
            color: #fff;
        }

        .action-btn.active {
            border-color: #ff9a6b;
            color: #ff9a6b;
        }
    </style>
</head>

<body>

    <div class="app-container">
        <div class="sidebar">
            <div class="new-chat-btn" id="new-chat-btn">+ æ–°å¯¹è¯</div>
            <!-- æ˜¾ç¤º/å…³é—­æ‚¬æµ®çƒæŒ‰é’® -->
            <div class="action-btn" id="toggle-ball-btn">æ˜¾ç¤ºæ‚¬æµ®çƒ</div>

            <div class="history-list" id="history-list"></div>
        </div>
        <div class="main-chat">
            <div id="messages-container"></div>
            <div class="input-area">
                <div class="input-wrapper">
                    <textarea id="user-input" placeholder="è¾“å…¥æŒ‡ä»¤æˆ–æé—®..."></textarea>
                    <button id="send-btn">å‘é€</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // æ¨¡æ‹Ÿ Vue çš„å“åº”å¼æ•°æ®
        let state = {
            history: [],
            currentSessionIndex: 0,
            loading: false
        };

        const msgContainer = document.getElementById('messages-container');
        const historyListEl = document.getElementById('history-list');
        const userInput = document.getElementById('user-input');
        const sendBtn = document.getElementById('send-btn');

        // 1. åˆå§‹åŒ–
        async function init() {
            state.history = await window.electronAPI.getHistory();
            if (state.history.length === 0) {
                createNewChat();
            }
            renderHistory();
            renderMessages();
        }

        // 2. æ¸²æŸ“å†å²è®°å½•ä¾§è¾¹æ 
        function renderHistory() {
            historyListEl.innerHTML = '';
            state.history.forEach((session, index) => {
                const div = document.createElement('div');
                div.className = `history-item ${state.currentSessionIndex === index ? 'active' : ''}`;
                div.innerText = session.title || 'æ–°ä¼šè¯ ' + (index + 1);
                div.onclick = () => switchSession(index);
                historyListEl.appendChild(div);
            });
        }

        // 3. æ¸²æŸ“å½“å‰ä¼šè¯çš„æ¶ˆæ¯
        function renderMessages() {
            msgContainer.innerHTML = '';
            const messages = state.history[state.currentSessionIndex]?.messages || [];
            messages.forEach(msg => appendMessageUI(msg.role, msg.content));
            scrollToBottom();
        }

        // 4. å°†å•æ¡æ¶ˆæ¯æ·»åŠ åˆ° UI
        function appendMessageUI(role, content) {
            if (!content)
                content = '';
            const msgDiv = document.createElement('div');
            msgDiv.className = `message ${role}`;

            const isCode = content.includes('```');
            const avatar = role === 'user' ? 'ğŸ‘¤' : 'ğŸ¤–';

            let innerHTML = `
            <div class="avatar">${avatar}</div>
            <div class="content">
        `;

            if (isCode) {
                // æå–ä»£ç é€»è¾‘ (æ­£åˆ™è¡¨è¾¾å¼)
                const code = content.replace(/```(sh|bash|shell)?/gi, '').replace(/```/g, '').trim();
                innerHTML += `
                <div class="code-block">
                    <div class="code-header">
                        <span>Shell Script</span>
                        <button onclick="executeScript(\`${code.replace(/`/g, '\\`')}\`)">âš¡ æ‰§è¡Œ</button>
                    </div>
                    <pre><code>${code}</code></pre>
                </div>
            `;
            } else {
                innerHTML += `<div class="text-bubble">${content}</div>`;
            }

            innerHTML += `</div>`;
            msgDiv.innerHTML = innerHTML;
            msgContainer.appendChild(msgDiv);
            scrollToBottom();
        }

        // 5. äº¤äº’åŠŸèƒ½
        async function send() {
            const text = userInput.value.trim();
            if (!text || state.loading) return;

            state.loading = true;
            sendBtn.disabled = true;

            // æ›´æ–°æœ¬åœ°çŠ¶æ€
            state.history[state.currentSessionIndex].messages.push({ role: 'user', content: text });
            appendMessageUI('user', text);
            userInput.value = '';

            // è°ƒç”¨è¯†åˆ«ç”¨æˆ·éœ€æ±‚å¹¶è‡ªåŠ¨æ‰§è¡Œshellï¼Œè¿”å›æ‰§è¡Œæƒ…å†µ 
            const response = await window.electronAPI.sendMessage({
                text: text,
                sessionId: state.currentSessionIndex,
                sessionCount: state.history.length
            });

            // è¿™é‡Œå·²ç»åœ¨ç›‘å¬ä¸­æ›´æ–°ï¼Œæ— éœ€å†æ˜¾ç¤ºä¸€é
            // // æ›´æ–°åŠ©æ‰‹å›å¤
            // state.history[state.currentSessionIndex].messages.push({ role: 'assistant', content: response });
            // appendMessageUI('assistant', response);

            // å¦‚æœæ˜¯é¦–æ¡æ¶ˆæ¯ï¼Œæ›´æ–°æ ‡é¢˜
            if (state.history[state.currentSessionIndex].messages.length === 1) {
                state.history[state.currentSessionIndex].title = text.length > 5 ? `${text.substring(0, 5)}...` : text;
                renderHistory();
            }

            state.loading = false;
            sendBtn.disabled = false;
        }

        function createNewChat() {
            state.history.unshift({ title: 'æ–°ä¼šè¯', messages: [] });
            state.currentSessionIndex = 0;
            renderHistory();
            renderMessages();
        }

        function switchSession(index) {
            if (index < state.history.length && index >= 0) {
                state.currentSessionIndex = index;
                renderHistory();
                renderMessages();

                // è®©åç«¯æ›´æ–°sessionId
                window.electronAPI.sessionSwitch(index);
            } else {
                console.log(`index: ${index}, out of range!`);
            }
        }

        window.executeScript = async (code) => {
            if (confirm("ç¡®è®¤æ‰§è¡Œæ­¤è„šæœ¬ï¼Ÿ\n\n" + code)) {
                await window.electronAPI.runCommand(code, state.currentSessionIndex);
            }
        };

        function scrollToBottom() {
            msgContainer.scrollTop = msgContainer.scrollHeight;
        }

        // äº‹ä»¶ç›‘å¬
        document.getElementById('new-chat-btn').onclick = createNewChat;
        sendBtn.onclick = send;
        userInput.onkeyup = (e) => { if (e.key === 'Enter') send(); };

        // ç›‘å¬æ¥è‡ªè¯­éŸ³è¯†åˆ«çš„ç»“æœå¹¶å¡«å…¥è¾“å…¥æ¡†
        window.electronAPI.onUpdateStatus((data) => {
            if (data.role === 'voice-input') {
                // è¯­éŸ³è¯†åˆ«ç»“æœå¡«å……åˆ°è¾“å…¥æ¡†
                userInput.value = data.content;
                userInput.focus(); // è‡ªåŠ¨èšç„¦ï¼Œä¾¿äºç”¨æˆ·ç¼–è¾‘
                // ä¸è‡ªåŠ¨å‘é€ï¼Œè®©ç”¨æˆ·å¯ä»¥ç¼–è¾‘åå†å‘é€
            } else if (data.role === 'ai') {
                // å…¶ä»–AIå›å¤å¯ä»¥ä½œä¸ºæ—¥å¿—æ˜¾ç¤ºåœ¨æ§åˆ¶å°
                console.log(data.content);
            }
        });

        const toggleBallBtn = document.getElementById('toggle-ball-btn');
        let isBallShowing = false;

        // ç‚¹å‡»åˆ‡æ¢æ‚¬æµ®çƒæ˜¾ç¤º
        toggleBallBtn.onclick = () => {
            isBallShowing = !isBallShowing;
            window.electronAPI.toggleBall(isBallShowing);
            updateBallBtnUI(isBallShowing);
        };

        // ç›‘å¬æ¥è‡ªä¸»è¿›ç¨‹çš„æ‚¬æµ®çƒçŠ¶æ€æ›´æ–° (ä¾‹å¦‚æ‚¬æµ®çƒè¢«è‡ªå·±å…³é—­äº†)
        window.electronAPI.onBallStatus((exists) => {
            isBallShowing = exists;
            updateBallBtnUI(exists);
        });

        function updateBallBtnUI(exists) {
            if (exists) {
                toggleBallBtn.innerText = 'å…³é—­æ‚¬æµ®çƒ';
                toggleBallBtn.classList.add('active');
            } else {
                toggleBallBtn.innerText = 'æ˜¾ç¤ºæ‚¬æµ®çƒ';
                toggleBallBtn.classList.remove('active');
            }
        }

        // å“åº”aiè¿”å›
        window.electronAPI.onAiResponse(({ role, content, sessionId } = {}) => {
            console.log(`onAiResponse callingï¼role: ${role}, content: ${content}, sessionId: ${sessionId}`);

            // æ·»åŠ å†å²è®°å½•
            if (state.history[sessionId]) {
                state.history[sessionId].messages.push({ role: role, content: content });
            }

            // åªåœ¨å½“å‰çª—å£æ¸²æŸ“å¯¹è¯ UI
            if (sessionId === state.currentSessionIndex) {
                // è°ƒç”¨æ·»åŠ æ¶ˆæ¯ UI å‡½æ•°
                appendMessageUI(role, content);
                scrollToBottom();
            }

            // å¦‚æœæ ‡é¢˜å˜åŒ–ï¼Œåˆ·æ–°ä¾§è¾¹æ æ ‡é¢˜
            renderHistory();
        });

        window.electronAPI.onAskPermission(async (data) => {
            const { requestId, type, message, command } = data;
            
            console.log(`æ”¶åˆ°æƒé™è¯·æ±‚: ${type}, ID: ${requestId}`);

            let result;
            
            if (type === 'sudo-password') {
                // æ˜¾ç¤ºå¯†ç è¾“å…¥å¯¹è¯æ¡†ï¼ˆä¼ é€’ command ä»¥æ˜¾ç¤ºè¦æ‰§è¡Œçš„å‘½ä»¤ï¼‰
                result = await showSudoPasswordDialog(message, command);
            } else if (type === 'run-confirmation') {
                // æ˜¾ç¤ºå‘½ä»¤ç¡®è®¤å¯¹è¯æ¡†
                result = await showRunConfirmationDialog(message, command);
            } else {
                // å…¶ä»–ç±»å‹çš„æƒé™è¯·æ±‚
                result = await showMyCustomDialog(message || `æ˜¯å¦å…è®¸è®¿é—® ${type}?`);
            }

            // å°†ç»“æœå‘å›ä¸»è¿›ç¨‹ï¼Œå¿…é¡»å¸¦ä¸Š requestId
            window.electronAPI.sendPermissionResponse({
                requestId: requestId,
                result: result // å¯†ç å­—ç¬¦ä¸²æˆ– boolean
            });
        });

        async function showRunConfirmationDialog(message, command) {
            return new Promise((resolve) => {
                const backdrop = document.createElement('div');
                backdrop.style.cssText = `
                    position: fixed;
                    top: 0;
                    left: 0;
                    right: 0;
                    bottom: 0;
                    background: rgba(0, 0, 0, 0.5);
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    z-index: 9999;
                `;

                const dialog = document.createElement('div');
                dialog.style.cssText = `
                    background: #2d2d2d;
                    border: 1px solid #444;
                    border-radius: 8px;
                    padding: 24px;
                    width: 500px;
                    max-height: 70vh;
                    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.7);
                    color: #ccc;
                    font-family: 'Segoe UI', sans-serif;
                    overflow-y: auto;
                `;

                dialog.innerHTML = `
                    <div>
                        <h2 style="margin: 0 0 16px 0; color: #fff; font-size: 18px;">âš¡ å‘½ä»¤ç¡®è®¤</h2>
                        <p style="margin: 0 0 12px 0; color: #aaa; font-size: 13px;">${message}</p>
                        
                        <div style="background: #1e1e1e; border: 1px solid #444; border-radius: 4px; padding: 12px; margin-bottom: 16px;">
                            <div style="font-size: 11px; color: #888; margin-bottom: 8px;">å°†æ‰§è¡Œçš„å‘½ä»¤:</div>
                            <code style="
                                display: block;
                                color: #d7ba7d;
                                font-family: 'Fira Code', monospace;
                                font-size: 12px;
                                word-break: break-all;
                                white-space: pre-wrap;
                                overflow-x: auto;
                            ">${command}</code>
                        </div>
                        
                        <div style="background: #3a2a2a; border-left: 3px solid #f39c12; padding: 12px; border-radius: 4px; margin-bottom: 16px;">
                            <p style="margin: 0; color: #ffcc99; font-size: 13px;">âš ï¸ è¯·ç¡®ä¿ä½ ä¿¡ä»»æ­¤å‘½ä»¤çš„æ¥æº</p>
                            <p style="margin: 5px 0 0 0; color: #ccc; font-size: 11px;">æ‰§è¡ŒæœªçŸ¥å‘½ä»¤å¯èƒ½å¯¼è‡´ç³»ç»ŸæŸå</p>
                        </div>
                        
                        <div style="display: flex; gap: 12px;">
                            <button id="runConfirmBtn" style="
                                flex: 1;
                                padding: 10px 16px;
                                background: #27ae60;
                                color: white;
                                border: none;
                                border-radius: 4px;
                                cursor: pointer;
                                font-size: 14px;
                                font-weight: 500;
                            ">æ‰§è¡Œ</button>
                            <button id="runCancelBtn" style="
                                flex: 1;
                                padding: 10px 16px;
                                background: #444;
                                color: #ccc;
                                border: none;
                                border-radius: 4px;
                                cursor: pointer;
                                font-size: 14px;
                            ">å–æ¶ˆ</button>
                        </div>
                    </div>
                `;

                backdrop.appendChild(dialog);
                document.body.appendChild(backdrop);

                const confirmBtn = dialog.querySelector('#runConfirmBtn');
                const cancelBtn = dialog.querySelector('#runCancelBtn');

                const cleanup = () => {
                    backdrop.remove();
                };

                confirmBtn.onclick = () => {
                    cleanup();
                    resolve(true);
                };

                cancelBtn.onclick = () => {
                    cleanup();
                    resolve(false);
                };

                // Escape å–æ¶ˆ
                const handleKeyUp = (e) => {
                    if (e.key === 'Escape') {
                        backdrop.removeEventListener('keyup', handleKeyUp);
                        cleanup();
                        resolve(false);
                    }
                };
                backdrop.addEventListener('keyup', handleKeyUp);
                backdrop.focus();
            });
        }

        async function showSudoPasswordDialog(message, command) {
            return new Promise((resolve) => {
                // åˆ›å»ºæ¨¡æ€å¯¹è¯æ¡†
                const backdrop = document.createElement('div');
                backdrop.style.cssText = `
                    position: fixed;
                    top: 0;
                    left: 0;
                    right: 0;
                    bottom: 0;
                    background: rgba(0, 0, 0, 0.5);
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    z-index: 9999;
                `;

                const dialog = document.createElement('div');
                dialog.style.cssText = `
                    background: #2d2d2d;
                    border: 1px solid #444;
                    border-radius: 8px;
                    padding: 24px;
                    width: 450px;
                    max-height: 70vh;
                    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.7);
                    color: #ccc;
                    font-family: 'Segoe UI', sans-serif;
                    overflow-y: auto;
                `;

                let commandDisplay = '';
                if (command) {
                    commandDisplay = `
                        <div style="background: #1e1e1e; border: 1px solid #444; border-radius: 4px; padding: 12px; margin-bottom: 16px;">
                            <div style="font-size: 11px; color: #888; margin-bottom: 8px;">å°†æ‰§è¡Œçš„å‘½ä»¤:</div>
                            <code style="
                                display: block;
                                color: #d7ba7d;
                                font-family: 'Fira Code', monospace;
                                font-size: 12px;
                                word-break: break-all;
                                white-space: pre-wrap;
                                overflow-x: auto;
                            ">${command}</code>
                        </div>
                    `;
                }

                dialog.innerHTML = `
                    <div style="margin-bottom: 20px;">
                        <h2 style="margin: 0 0 12px 0; color: #fff; font-size: 18px;">ğŸ” éœ€è¦ç®¡ç†å‘˜å¯†ç </h2>
                        <div style="background: #3a2a2a; border-left: 3px solid #e74c3c; padding: 12px; border-radius: 4px; margin-bottom: 16px;">
                            <p style="margin: 0; color: #ffaaaa; font-size: 13px;">âš ï¸ ä»…åœ¨ä¿¡ä»»çš„å‘½ä»¤ä¸­è¾“å…¥å¯†ç </p>
                            <p style="margin: 8px 0 0 0; color: #ccc; font-size: 12px;">æ­¤æ“ä½œéœ€è¦ sudo æƒé™</p>
                        </div>
                        ${commandDisplay}
                        <p style="margin: 0; color: #ccc; font-size: 14px;">${message}</p>
                    </div>
                    <div style="margin-bottom: 16px;">
                        <label style="display: block; margin-bottom: 8px; font-size: 13px; color: #aaa;">å¯†ç :</label>
                        <input type="password" id="sudoPasswordInput" style="
                            width: 100%;
                            padding: 8px 12px;
                            background: #1e1e1e;
                            border: 1px solid #444;
                            border-radius: 4px;
                            color: #ccc;
                            font-family: monospace;
                            box-sizing: border-box;
                        " placeholder="è¾“å…¥ä½ çš„ç³»ç»Ÿå¯†ç ">
                    </div>
                    <div style="display: flex; gap: 12px;">
                        <button id="sudoSubmitBtn" style="
                            flex: 1;
                            padding: 8px 16px;
                            background: #e74c3c;
                            color: white;
                            border: none;
                            border-radius: 4px;
                            cursor: pointer;
                            font-size: 14px;
                            font-weight: 500;
                        ">æäº¤</button>
                        <button id="sudoCancelBtn" style="
                            flex: 1;
                            padding: 8px 16px;
                            background: #444;
                            color: #ccc;
                            border: none;
                            border-radius: 4px;
                            cursor: pointer;
                            font-size: 14px;
                        ">å–æ¶ˆ</button>
                    </div>
                `;

                backdrop.appendChild(dialog);
                document.body.appendChild(backdrop);

                const passwordInput = dialog.querySelector('#sudoPasswordInput');
                const submitBtn = dialog.querySelector('#sudoSubmitBtn');
                const cancelBtn = dialog.querySelector('#sudoCancelBtn');

                const cleanup = () => {
                    backdrop.remove();
                };

                const handleSubmit = () => {
                    const password = passwordInput.value;
                    cleanup();
                    resolve(password || null); // è¿”å›å¯†ç æˆ– null
                };

                const handleCancel = () => {
                    cleanup();
                    resolve(null); // è¿”å› null è¡¨ç¤ºç”¨æˆ·å–æ¶ˆ
                };

                submitBtn.onclick = handleSubmit;
                cancelBtn.onclick = handleCancel;
                
                // å›è½¦æäº¤
                passwordInput.onkeyup = (e) => {
                    if (e.key === 'Enter') handleSubmit();
                    if (e.key === 'Escape') handleCancel();
                };

                // è‡ªåŠ¨èšç„¦è¾“å…¥æ¡†
                setTimeout(() => passwordInput.focus(), 100);
            });
        }

        async function showMyCustomDialog(msg) {
            // è¿™é‡Œå¯ä»¥æ˜¯ä½ çš„ Vue/React ç»„ä»¶æˆ–ç®€å•çš„ confirm
            return confirm(msg); 
        }

        init();
    </script>
</body>

</html>